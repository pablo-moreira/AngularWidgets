<!DOCTYPE html>
<html lang="en" >
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>AngularWidgets v0.2 - AngularJS Widgets</title>

    <link rel="stylesheet" href="../../theme/theme.css">
    <link rel="stylesheet" href="../../css/angularWidgets/angularWidgets-0.2.1.css">
  	<link rel="stylesheet" href="../../css/app.css">
  
    <script src="../../js/angular/angular.js"></script>
    <script src="../../js/angular/angular-route.js"></script>
    <script src="../../js/angular/angular-animate.js"></script>
    <script src="../../js/angularWidgets/angularWidgets-0.2.1.js"></script>
        
    <script>
		angular.module('teste', ['angular.widgets'])		
		.controller('DatatableController', [ '$http', 'puiGrowl', function($http, puiGrowl) {
	        
			var vm = this;
			
	        vm.cars =  [
	            {'brand':'Volkswagen','year': 2012, 'color':'White', 'vin':'dsad231ff'},
	            {'brand':'Audi','year': 2011, 'color':'Black', 'vin':'gwregre345'},
	            {'brand':'Renault','year': 2005, 'color':'Gray', 'vin':'h354htr'},
	            {'brand':'Bmw','year': 2003, 'color':'Blue', 'vin':'j6w54qgh'},
	            {'brand':'Mercedes','year': 1995, 'color':'White', 'vin':'hrtwy34'},
	            {'brand':'Opel','year': 2005, 'color':'Black', 'vin':'jejtyj'},
	            {'brand':'Honda','year': 2012, 'color':'Yellow', 'vin':'g43gr'},
	            {'brand':'Chevrolet','year': 2013, 'color':'White', 'vin':'greg34'},
	            {'brand':'Opel','year': 2000, 'color':'Black', 'vin':'h54hw5'},
	            {'brand':'Mazda','year': 2013, 'color':'Red', 'vin':'245t2s'}
	        ];
	        
	        vm.cars2 = [
				{'brand':'Hyunday','year': 2010, 'color':'Gray', 'vin':'jdjdkdjk'},
		    	{'brand':'Audi','year': 2011, 'color':'Black', 'vin':'djdkjdkjdkj'},
		    	{'brand':'Volkswagen','year': 2012, 'color':'White', 'vin':'dsad231ff'},
	            {'brand':'Audi','year': 2011, 'color':'Black', 'vin':'gwregre345'},
	            {'brand':'Renault','year': 2005, 'color':'Gray', 'vin':'h354htr'},
	            {'brand':'Bmw','year': 2003, 'color':'Blue', 'vin':'j6w54qgh'},
	            {'brand':'Mercedes','year': 1995, 'color':'White', 'vin':'hrtwy34'},
	            {'brand':'Opel','year': 2005, 'color':'Black', 'vin':'jejtyj'},
	            {'brand':'Honda','year': 2012, 'color':'Yellow', 'vin':'g43gr'},
	            {'brand':'Chevrolet','year': 2013, 'color':'White', 'vin':'greg34'},
	            {'brand':'Opel','year': 2000, 'color':'Black', 'vin':'h54hw5'},
	            {'brand':'Mazda','year': 2013, 'color':'Red', 'vin':'245t2s'},
	            {'brand':'Opel','year': 2000, 'color':'Green', 'vin':'h54hw5'},
	            {'brand':'Mazda','year': 2013, 'color':'Yellow', 'vin':'djdjdjk'}
			];
	        
            vm.onRowSelect = function(event, data) {
                puiGrowl.showInfoMessage('Row selection', 'Selected a ' + data.color + ' ' + data.brand + ' of ' + data.year + ' (id = ' + data.vin + ')');
            }

	        vm.onRowUnselect = function(event, data) {
				if (data) {
                	puiGrowl.showInfoMessage('Row deselection', 'deselected the ' + data.color + ' ' + data.brand + ' of ' + data.year + ' (id = ' + data.vin + ')');
                }
            }

	        vm.getCars = function() {
	        	return vm.cars;	
	        }
	        
	        vm.changeData = function () {
	        	vm.cars = vm.cars2;
	        };
	        
	        vm.showVin = function (car) {
	        	alert(car.vin);
	        };
	    }]);
    </script>
</head>
<body ng-app="teste">
	<div ng-controller="DatatableController as ctrl">
		
		
		
		<pui-datatable value="ctrl.getCars()" item="car" itemId="vin" caption="Paginator" 
			selectionMode="multiple"
			onRowSelect="ctrl.onRowSelect"
			onRowUnselect="ctrl.onRowUnselect"
			paginator="true"
    		rows="4"
			style="margin-top: 10px">
			
	    	<pui-column value="brand" headerText="Brand">
	    		<input type="text" ng-model="car.brand" />
	    	</pui-column>
			<pui-column headerText="Year" sortBy="year">			
				{{car.year}}
			</pui-column>
			<pui-column headerText="Color" sortBy="color">
				<div>
					<div style="border: 1px solid #000; height: 16px; width: 16px; background-color: {{car.color}}"></div>
					{{car.color}}
					
				</div>					
			</pui-column>
			<pui-column>
				<button ng-click="ctrl.showVin(car)">Show Vin</button>
			</pui-column>
	    </pui-datatable>
		
		<button ng-click="ctrl.changeData()">Change Data</button>
		
		<table>
			<tr ng-repeat="car in ctrl.getCars()">
				<td>
					{{car.brand}}
				</td>
			</tr>
		</table>
		
	</div>
</body>